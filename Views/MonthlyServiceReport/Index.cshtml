@model PagedList.IPagedList<Alliance_for_Life.ViewModels.MonthlyServices>
@using PagedList.Mvc;

<link href="~/Content/PagedList.css" rel="stylesheet" type="text/css" />
@{

    Layout = "~/Views/Shared/_Layout.cshtml";
}


<br />
<div class="container-fluid">

    @if (!User.IsInRole("Admin"))
    {
        <h2 style="text-align:center; color:red;">@ViewBag.Title's for @ViewBag.Subcontractor</h2>
        <br />
        <form>
            @using (Html.BeginForm(FormMethod.Post))
            {
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-5th-1 col-sm-3" style="align-content:center;">
                            Search By Year: @Html.DropDownList("Year", null, "Select Year", htmlAttributes: new { @class = "form-control", onchange = "this.form.submit()" })
                        </div>
                        <div class="col-xs-5th-1 col-sm-3" style="align-content:center;">
                            Search By Month: @Html.DropDownList("Month", null, "Select Month", htmlAttributes: new { @class = "form-control", onchange = "this.form.submit()" })
                        </div>
                    </div>
                </div>
            }
        </form>
    }
    else
    {
        <h2 style="text-align:center; color:red;">@ViewBag.Title</h2>
        <form>
            @using (Html.BeginForm(FormMethod.Post))
            {
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-xs-5th-1 col-sm-3" style="align-content:center;">
                            Search By Organization: @Html.DropDownList("searchString", (IEnumerable<SelectListItem>)ViewBag.Subcontractor, "", htmlAttributes: new { @class = "form-control", onchange = "this.form.submit()" })
                        </div>
                        <div class="col-xs-5th-1 col-sm-3" style="align-content:center;">
                            Search By Year: @Html.DropDownList("Year", null, "Select Year", htmlAttributes: new { @class = "form-control", onchange = "this.form.submit()" })
                        </div>
                        <div class="col-xs-5th-1 col-sm-3" style="align-content:center;">
                            Search By Month: @Html.DropDownList("Month", null, "Select Month", htmlAttributes: new { @class = "form-control", onchange = "this.form.submit()" })
                        </div>
                    </div>
                </div>
            }
        </form>
    }


    <h3>Residental </h3>

    <table id="dtBasicExample" class="table table-striped table-bordered table-sm" style="font-size:16px" cellspacing="0" width="100">
        <thead>
            <tr style="font-size:13px; text-align:center;background-color:#c3e1f7;">
                <th class="th-sm">
                    @Html.ActionLink("Organization", "Index", new { sortOrder = ViewBag.NameSortParm })
                </th>
                <th class="th-sm">
                    Month
                </th>
                <th>
                    Year
                </th>
                <th class="th-sm">
                    Total Overall Client Bed Nights
                </th>
                <th class="th-sm">
                    Current A2A Enrollment
                </th>
                <th class="th-sm">
                    Total A2A Bed Nights
                </th>
                <th class="th-sm">
                    # of Clients Engaged in Job or Educational Services
                </th>
                <th class="th-sm">
                    Total # of Fathers Participated in A2A
                </th>
                <th class="th-sm">
                    Total # of Prenatal & Parenting Education Classes held
                </th>
                <th class="th-sm">
                    Total # of Clients Attending Prenatal & Parenting Classes
                </th>
                <th class="th-sm">
                    Case Management Hours Provided
                </th>
                <th class="th-sm">
                    Total # of Participants in Case Management
                </th>
                <th class="th-sm">
                    Total # of Other Classes held (i.e. money management, healthy lifestyles etc.)
                </th>
                <th class="th-sm">
                    Details
                </th>

                <th class="th-sm">
                    Edit
                </th>

        </thead>

        @foreach (var items in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => items.Residential.Subcontractor.OrgName)
                </td>
                <td>
                    @items.Residential.Month
                </td>
                <td>
                    @items.Residential.Year
                </td>
                <td>
                    @items.Residential.TotBedNights.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotA2AEnrollment.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotA2ABedNights.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.ClientsJobEduServ.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.ParticipatingFathers.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotEduClasses.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotClientsinEduClasses.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotCaseHrs.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotClientsCaseHrs.ToString("#,##0")
                </td>
                <td>
                    @items.Residential.TotOtherClasses.ToString("#,##0")
                </td>
                <td>
                    <a href="@Url.Action("Details", "ResidentialMIRs", new { id = items.Residential.Id }, Request.Url.Scheme)">
                        <i style="font-size:16px; color:#3498DB" class="fa">&#xf06e;</i>
                    </a>

                </td>

                <td>
                    <a href="@Url.Action("Edit", "ResidentialMIRs", new { id = items.Residential.Id }, Request.Url.Scheme)">
                        <i style="font-size:16px; color:#3498DB" class="fa">&#xf044;</i>
                    </a>
                </td>


            </tr>
        }
        <tr>
            <td style="background-color:lightgreen; color:black;font-size:20px;">Total:</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotBedNights).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotA2AEnrollment).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotA2ABedNights).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.ClientsJobEduServ).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.ParticipatingFathers).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotEduClasses).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotClientsinEduClasses).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotCaseHrs).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotClientsCaseHrs).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.Residential.TotOtherClasses).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>

        </tr>
    </table>

    <p>
        <h3>Non Residental </h3>
    </p>

    <table id="dtBasicExample" class="table table-striped table-bordered table-sm" style="font-size:16px" cellspacing="0" width="100">
        <thead>
            <tr style="font-size:13px; text-align:center;background-color:#c3e1f7;">
                <th class="th-sm">
                    @Html.ActionLink("Organization", "Index", new { sortOrder = ViewBag.NameSortParm })
                </th>
                <th class="th-sm">
                    Month
                </th>
                <th>
                    Year
                </th>
                <th class="th-sm">
                    Current A2A Enrollment
                </th>
                <th class="th-sm">
                    Monthly A2A Clients Served
                </th>
                <th class="th-sm">
                    Total of Overall Clients Served
                </th>
                <th class="th-sm">
                    # of Clients engaged in  Jobs or Educational Services
                </th>
                <th class="th-sm">
                    Total # of Fathers Participating in A2A
                </th>
                <th class="th-sm">
                    Total # of Parenting Education Classes held
                </th>
                <th class="th-sm">
                    Total # of Clients Attending Prenatal & Parenting Classes
                </th>
                <th class="th-sm">
                    Case Management Hours Provided
                </th>
                <th class="th-sm">
                    Total # of Participants in Case Management
                </th>
                <th class="th-sm">
                    Total # of Other Classes held (i.e. money management, healthy lifestyles etc.)
                </th>
                <th class="th-sm">
                    Details
                </th>

                <th class="th-sm">
                    Edit
                </th>

        </thead>

        @foreach (var items in Model)
        {
            <tr>
                <td>
                    @items.NonResidential.Subcontractor.OrgName
                </td>
                <td>
                    @items.NonResidential.Months
                </td>
                <td>
                    @items.NonResidential.Year
                </td>
                <td>
                    @items.NonResidential.TotA2AEnrollment.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.MA2Apercent.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.TotOverallServed.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.ClientsJobEduServ.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.ParticipatingFathers.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.TotEduClasses.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.TotClientsinEduClasses.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.TotCaseHrs.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.TotClientsCaseHrs.ToString("#,##0")
                </td>
                <td>
                    @items.NonResidential.TotOtherClasses.ToString("#,##0")
                </td>
                <td>
                    <a href="@Url.Action("Details", "NonResidentialMIRs", new { id = items.NonResidential.Id }, Request.Url.Scheme)">
                        <i style="font-size:16px; color:#3498DB" class="fa">&#xf06e;</i>
                    </a>

                </td>

                <td>
                    <a href="@Url.Action("Edit", "NonResidentialMIRs", new { id = items.NonResidential.Id }, Request.Url.Scheme)">
                        <i style="font-size:16px; color:#3498DB" class="fa">&#xf044;</i>
                    </a>
                </td>

            </tr>
        }
        <tr>
            <td style="background-color:lightgreen; color:black;font-size:20px;">Total:</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotA2AEnrollment).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.MA2Apercent).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotOverallServed).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.ClientsJobEduServ).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.ParticipatingFathers).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotEduClasses).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotClientsinEduClasses).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotCaseHrs).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotClientsCaseHrs).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;">@Model.Sum(a => a.NonResidential.TotOtherClasses).ToString("#,##0")</td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>
            <td style="background-color:lightgreen; color:black;font-size:20px;"></td>

        </tr>
    </table>
    <div class="container-fluid">
        <form>
            @using (Html.BeginForm())
            {
                <br />
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-sm-4">
                            Page @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) of @Model.PageCount

                            @Html.PagedListPager(Model, page => Url.Action("Index",
                            new { page, pgSize = ViewBag.psize, @class = "pagination" }))
                        </div>
                        <div class="col-sm-4">
                            Results per Page:
                            @Html.DropDownList("pgSize", (IEnumerable<SelectListItem>)ViewBag.PageSize, "", htmlAttributes: new { @class = "form-control", onchange = "this.form.submit()" })
                        </div>
                    </div>
                </div>
            }
        </form>
    </div>
</div>